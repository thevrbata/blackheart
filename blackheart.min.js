class ClassWatcher{constructor(e,t,s,r){this.targetNode=e,this.classToWatch=t,this.classAddedCallback=s,this.classRemovedCallback=r,this.observer=null,this.lastClassState=e.classList.contains(this.classToWatch),this.init()}init(){this.observer=new MutationObserver(this.mutationCallback),this.observe()}observe(){this.observer.observe(this.targetNode,{attributes:!0})}disconnect(){this.observer.disconnect()}mutationCallback=e=>{for(let t of e)if("attributes"===t.type&&"class"===t.attributeName){let e=t.target.classList.contains(this.classToWatch);this.lastClassState!==e&&(this.lastClassState=e,e?this.classAddedCallback():this.classRemovedCallback())}}}function prioritizeStreamers(e,t){switch(e.user_name.toLowerCase()){case"dunduk":current[t].sort=3;break;case"goldencargo":current[t].sort=2;break;default:current[t].sort=1}}function getCookie(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function showCloseBtn(){document.body.classList.contains("wp-night-mode-on")?close.style.color="#ffffff":close.style.color="#000000"}if("true"!=getCookie("twitch-widget-hidden"))if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));else{var current,widget=document.getElementById("stream-widget"),xhr=new XMLHttpRequest;widget.innerHTML='<div id="header"><div id="text">Заходи на стрим, дружище!</div><span id="close-btn"/></div><div id="frame"></div>';var close=document.getElementById("close-btn");close.addEventListener("click",(function(){widget.style.display="none",widget.innerHTML="",document.cookie="twitch-widget-hidden=true; max-age=172800; secure; path=/"})),document.body.classList.contains("wp-night-mode-on")&&(close.style.color="#ffffff");var watcher=new ClassWatcher(document.body,"wp-night-mode-on",showCloseBtn,showCloseBtn);xhr.addEventListener("readystatechange",(function(){if(4===this.readyState){var e=JSON.parse(this.responseText);if((current=e.data).length>0){current.forEach(prioritizeStreamers),current.sort((function(e,t){return e.sort-t.sort}));var t='<iframe src="https://player.twitch.tv/?channel='+current[0].user_name+'&autoplay=true&muted=true&parent=tarkov.help" height="200" width="350" allowfullscreen="true"></iframe>';document.getElementById("frame").innerHTML=t,widget.style.display="block"}}})),xhr.open("GET","https://api.twitch.tv/helix/streams/?user_login=dunduk&user_login=theblindshogun&user_login=goldencargo"),xhr.setRequestHeader("Client-ID","jft4xbv83d62uoh24r6kli5lwz674m"),xhr.setRequestHeader("Authorization","Bearer a9qlnrwoc8j6o7uap1k80dm9k4cavj"),xhr.send()}
